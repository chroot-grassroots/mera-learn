<!DOCTYPE html>
<html>
<head>
    <title>Solid Library Loading Test</title>
    <style>
        body { font-family: monospace; padding: 20px; }
        .test { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
        .pass { background: #d4edda; }
        .fail { background: #f8d7da; }
    </style>
</head>
<body>
    <h1>Solid Library Loading Test</h1>
    <div id="results"></div>

    <!-- Test different CDN approaches -->
    
    <!-- Test 1: Original unpkg -->
    <script src="https://unpkg.com/@inrupt/solid-client-authn-browser@1.17.5/dist/solid-client-authn.bundle.js"></script>
    
    <!-- Test 2: Try unpkg for solid-client -->
    <script src="https://unpkg.com/@inrupt/solid-client@1.30.2/dist/solid-client.bundle.js"></script>
    
    <script>
        function log(message, success = null) {
            const div = document.createElement('div');
            div.className = 'test ' + (success === true ? 'pass' : success === false ? 'fail' : '');
            div.textContent = message;
            document.getElementById('results').appendChild(div);
            console.log(message);
        }

        // Wait for scripts to load
        setTimeout(() => {
            log('=== LIBRARY LOADING TEST ===');
            
            // Test 1: Check if libraries are defined
            log(`window.solidClientAuthentication exists: ${typeof window.solidClientAuthentication !== 'undefined'}`, 
                typeof window.solidClientAuthentication !== 'undefined');
            
            log(`window.solidClient exists: ${typeof window.solidClient !== 'undefined'}`, 
                typeof window.solidClient !== 'undefined');
            
            // Test 2: Check what's actually on window object
            const solidKeys = Object.keys(window).filter(key => key.toLowerCase().includes('solid'));
            log(`Solid-related keys on window: ${solidKeys.join(', ')}`);
            
            // Test 3: Check network requests
            log('=== CHECKING NETWORK REQUESTS ===');
            log('Open DevTools â†’ Network tab and look for:');
            log('1. solid-client-authn.bundle.js - should be 200 OK');
            log('2. solid-client.bundle.js - check status');
            
            // Test 4: Try accessing solidClient methods
            if (typeof window.solidClient !== 'undefined') {
                try {
                    log(`solidClient.saveFileInContainer: ${typeof window.solidClient.saveFileInContainer}`, 
                        typeof window.solidClient.saveFileInContainer === 'function');
                } catch (e) {
                    log(`Error accessing solidClient methods: ${e.message}`, false);
                }
            }
            
            // Test 5: Module vs non-module loading
            log('=== MODULE LOADING TEST ===');
            log('This script is loaded as regular script (not module)');
            
        }, 2000); // Wait 2 seconds for scripts to load
    </script>
</body>
</html>
